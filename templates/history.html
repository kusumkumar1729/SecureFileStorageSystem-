{% extends "base.html" %}

{% block content %}
<div class="container mt-5 history-container">
    <div class="outer-box">
        <div class="inner-box">
            <h1 class="text-center history-title">Encryption & Decryption History</h1>

            <!-- Encryption History -->
            <h2 class="history-subtitle">Encryption</h2>
            {% if encrypt_history %}
                <div class="table-responsive">
                    <table class="table table-striped table-bordered history-table">
                        <thead>
                            <tr>
                                <th>File Name</th>
                                <th>File Location</th>
                                <th>Encryption Method</th>
                                <th>Date & Time</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for entry in encrypt_history %}
                                <tr>
                                    <td>{{ entry.filename }}</td>
                                    <td>{{ entry.file_location }}</td>
                                    <td>{{ entry.encryption_method }}</td>
                                    <td>{{ entry.timestamp|date:"Y-m-d H:i:s" }}</td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            {% else %}
                <p class="text-center text-muted">No encryption history found.</p>
            {% endif %}

            <!-- Decryption History -->
            <h2 class="history-subtitle">Decryption</h2>
            {% if decrypt_history %}
                <div class="table-responsive">
                    <table class="table table-striped table-bordered history-table">
                        <thead>
                            <tr>
                                <th>File Name</th>
                                <th>File Location</th>
                                <th>Encryption Method</th>
                                <th>Date & Time</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for entry in decrypt_history %}
                                <tr>
                                    <td>{{ entry.filename }}</td>
                                    <td>{{ entry.file_location }}</td>
                                    <td>{{ entry.encryption_method }}</td>
                                    <td>{{ entry.timestamp|date:"Y-m-d H:i:s" }}</td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            {% else %}
                <p class="text-center text-muted">No decryption history found.</p>
            {% endif %}
        </div>
    </div>
</div>

<style>
    /* Import Roboto font from Google Fonts */
    @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap');

    /* Center the content vertically and horizontally */
    .history-container {
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: calc(100vh - 120px); /* Adjust for navbar and footer height */
        padding: 20px;
    }

    /* Inner box with white background and subtle shadow */
    .inner-box {
        border: 1px solid #2C3E50; /* Dark teal border */
        border-radius: 10px;
        padding: 40px;
        background: #ffffff; /* White background */
        color: #2C3E50; /* Dark teal text */
        width: 100%;
        max-width: 1200px; /* Limit width for readability */
        box-shadow: 0 6px 12px rgba(44, 62, 80, 0.1); /* Subtle shadow */
        transition: box-shadow 0.3s ease;
    }

    .inner-box:hover {
        box-shadow: 0 8px 16px rgba(44, 62, 80, 0.15); /* Slightly stronger shadow on hover */
    }

    /* Title styling */
    .history-title {
        font-size: 40px; /* Slightly smaller for balance */
        font-weight: 700;
        color: #2C3E50; /* Dark teal */
        margin-bottom: 40px;
        text-align: center;
        font-family: 'Roboto', sans-serif;
        animation: fadeInUp 1s ease;
    }

    /* Subtitle styling */
    .history-subtitle {
        font-size: 28px;
        font-weight: 500;
        color: #2C3E50; /* Dark teal */
        margin-top: 30px;
        margin-bottom: 20px;
        font-family: 'Roboto', sans-serif;
        position: relative;
    }

    .history-subtitle::after {
        content: '';
        position: absolute;
        bottom: -5px;
        left: 0;
        width: 50px;
        height: 2px;
        background: #2C3E50; /* Dark teal underline */
    }

    /* Table styling */
    .history-table {
        border: 1px solid #2C3E50; /* Dark teal border */
        background: #f9fafb; /* Very light gray background */
        color: #4A5568; /* Medium gray text */
        border-radius: 8px;
        font-family: 'Roboto', sans-serif;
        font-size: 16px;
        transition: all 0.3s ease;
    }

    .history-table thead th {
        background: linear-gradient(135deg, #2C3E50 0%, #34495E 100%); /* Gradient dark teal */
        color: #ffffff; /* White text */
        text-align: center;
        border: 1px solid #2C3E50; /* Dark teal border */
        padding: 14px;
        font-weight: 500;
    }

    .history-table tbody td {
        border: 1px solid #2C3E50; /* Dark teal border */
        padding: 12px;
        color: #4A5568; /* Medium gray text */
    }

    .history-table tbody tr:hover {
        background-color: #edf2f7; /* Light gray hover */
        color: #2C3E50; /* Dark teal text on hover */
        transform: scale(1.01); /* Subtle scale effect */
        transition: transform 0.2s ease, background-color 0.3s ease;
    }

    /* No history message */
    .text-muted {
        color: #718096; /* Softer gray for muted text */
        font-family: 'Roboto', sans-serif;
        font-size: 16px;
        font-weight: 400;
    }

    /* Animations */
    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }

    @keyframes fadeInUp {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
    }

    @keyframes slideIn {
        from { transform: translateY(20px); opacity: 0; }
        to { transform: translateY(0); opacity: 1; }
    }

    /* Responsive Design */
    @media (max-width: 768px) {
        .history-container {
            padding: 15px;
        }

        .history-title {
            font-size: 32px;
        }

        .history-subtitle {
            font-size: 24px;
        }

        .inner-box {
            padding: 25px;
        }

        .history-table {
            font-size: 14px;
        }
    }

    @media (max-width: 576px) {
        .history-title {
            font-size: 24px;
        }

        .history-subtitle {
            font-size: 20px;
        }

        .inner-box {
            padding: 20px;
        }

        .history-table {
            font-size: 12px;
        }

        .history-table thead th,
        .history-table tbody td {
            padding: 8px;
        }
    }
</style>
{% endblock %}